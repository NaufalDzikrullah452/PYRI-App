<>
  <effect
    meta={{
      showAction: 0,
      showProfile: false,
      showDashboard: false,
      showMasterData: false,
      showManagement: false,
      setPublish: false,
      statusPublish: false,
      changeAction: (open) => {},
      changeProfile: (open) => {},
      changeDashboard: (open) => {},
      changeManagement: (open) => {},
      changeMasterData: (open) => {},
      changePublish: (open) => {},
      avg_rating: 0,
      book: [],
      comment: [],
      showMoreLess: true,
      searching: "",
      entries: 5,
      last_entries: 5,
      first_entries: 0,
      pages: 1,
      sum_pages: 0,
      pages_array: [],
      loading_page: true,

      async onChange(e, key) {
        let value = e.target.value;

        if (key === "entries") {
          runInAction(() => {
            this[key] = value;
            this.first_entries = 0;
            this.pages = 1;
            this.last_entries = parseInt(value);
            this.sum_pages = Math.ceil(this.comment.length / this.entries);
            this.pages_array = Array.apply(null, {
              length: this.sum_pages,
            }).map(Number.call, Number);
            this.loading_page = false;
          });
        } else if (key === "searching") {
          runInAction(() => {
            this[key] = value;
            api("/api/comment", {
              comment: {
                comment_description: value,
              },
              e: "Searching",
            }).then((res) => {
              runInAction(() => {
                this.comment = res.comment;
                this.first_entries = 0;
                this.pages = 1;
                this.last_entries = parseInt(this.entries);
                this.sum_pages = Math.ceil(this.comment.length / this.entries);
                this.pages_array = Array.apply(null, {
                  length: this.sum_pages,
                }).map(Number.call, Number);
                this.loading_page = false;
              });
            });
          });
        } // console.log(key + " : " + value);
      },

      async onClickPages(key, value) {
        if (value !== this.pages && value !== 0 && value <= this.sum_pages) {
          const last_pages = this.pages;
          const gap = value - last_pages;
          const res = gap > 0;
          runInAction(() => {
            this.pages = value;

            if (res) {
              this.first_entries += parseInt(this.entries) * Math.abs(gap);
              this.last_entries += parseInt(this.entries) * Math.abs(gap);
            } else {
              this.first_entries -= parseInt(this.entries) * Math.abs(gap);
              this.last_entries -= parseInt(this.entries) * Math.abs(gap);
            }
          });
        }
      },

      async deleteComment(id) {
        console.log("delete: " + id);
        var secondConfirm = confirm(
          "Can't restore comment after delete, are you sure?"
        );

        if (secondConfirm) {
          api("/api/comment", {
            comment: {
              comment_id: parseInt(id),
            },
            e: "Delete",
          }).then((res) => {
            if (res.res === "Failure" || res === null) {
              alert("Can't delete comment. Database error.");
            } else {
              const deleteDom = document.getElementById("comment-" + id);
              deleteDom.style =
                "margin-bottom: 12px; transform: translateX(-700px); transition: transform 1.5s ease-in-out;";
              setTimeout(() => {
                deleteDom.style =
                  "margin-bottom: 12px; transform: translateX(0px); transition: transform 0s ease-in-out; opacity: 0;";
                api("/api/comment", {
                  comment: {
                    comment_book_id: parseInt(params.book_id),
                  },
                  e: "ReadByBookId",
                }).then((res) => {
                  runInAction(() => {
                    this.comment = res.comment;
                    this.first_entries = 0;
                    this.pages = 1;
                    this.last_entries = parseInt(this.entries);
                    this.sum_pages = Math.ceil(
                      this.comment.length / this.entries
                    );
                    this.pages_array = Array.apply(null, {
                      length: this.sum_pages,
                    }).map(Number.call, Number);
                    this.loading_page = false;
                    deleteDom.style =
                      "margin-bottom: 12px; transform: translateX(0px); transition: transform 1.5s ease-in-out; opacity: 1;";
                  });
                });
              }, 1500);
            }
          });
        }
      },

      async logout() {
        confirm("Logout of admin?") &&
          (await api("/api/admin", {
            data: "",
            event: "Logout",
          }).then((res) => {
            navigate("/login-admin");
          }));
      },

      async setPublishBook(value) {
        let data = {
          book_id: parseInt(params.book_id),
          book_is_released: value,
        };

        if (value) {
          data["book_date_published"] = new Date();
        }

        await api("/api/books", {
          book: { ...data },
          e: "Update",
        }).then((res) => {
          if (res.res === "Failure") {
            alert("Can't update book, related to other tables");
          } else {
            runInAction(() => {
              this.statusPublish = value;
            });
          }
        });
      },
    }}
    run={async () => {
      meta.action = {
        changeDashboard: (open) => {
          meta.showDashboard = open;
          let img = document.getElementById("chevron-dashboard");

          if (open == true) {
            img.setAttribute("style", "transform: rotate(0deg);");
          } else {
            img.setAttribute("style", "transform: rotate(180deg);");
          }
        },
        changeMasterData: (open) => {
          meta.showMasterData = open;
          let img = document.getElementById("chevron-master");

          if (open == true) {
            img.setAttribute("style", "transform: rotate(0deg);");
          } else {
            img.setAttribute("style", "transform: rotate(180deg);");
          }
        },
        changeManagement: (open) => {
          meta.showManagement = open;
          let img = document.getElementById("chevron-management");

          if (open == true) {
            img.setAttribute("style", "transform: rotate(0deg);");
          } else {
            img.setAttribute("style", "transform: rotate(180deg);");
          }
        },
        //profile dropdown
        changeProfile: (open) => {
          meta.showProfile = open;
        },
        changeAction: (open) => {
          meta.showAction = open;
        },
        //switch button
        changePublish: (open) => {
          meta.setPublish = open;
          let btn_swicth1 = document.getElementById("toggle");
          let btn_swicth2 = document.getElementById("switch");

          if (open == true) {
            btn_swicth1.setAttribute(
              "style",
              "transition: .4s; margin-left: 0px;"
            );
            btn_swicth2.setAttribute(
              "style",
              "transition: .3s; background-color: #d2dae2"
            );
          } else {
            btn_swicth1.setAttribute(
              "style",
              "transition: .4s; margin-left: 25px;"
            );
            btn_swicth2.setAttribute(
              "style",
              "transition: .3s; background-color: #ffc048;"
            );
          }
        },
      };

      if (window.user.roleAdmin !== "admin") {
        navigate("/login-admin");
      } else {
        // read book
        if (params.book_id !== undefined) {
          api("/api/books", {
            book: {
              book_id: parseInt(params.book_id),
            },
            e: "ReadDetailById",
          }).then((res) => {
            console.log(res);

            if (res.book !== null) {
              runInAction(() => {
                meta.book = res.book;
                meta.comment = res.book.comment;
                meta.sum_pages = Math.ceil(meta.comment.length / meta.entries);
                meta.last_entries =
                  meta.comment.length > 5 ? 5 : meta.comment.length;
                meta.pages_array = Array.apply(null, {
                  length: meta.sum_pages,
                }).map(Number.call, Number);
              });

              if (meta.book.rating.length !== 0) {
                var sum_rating = 0;
                meta.book.rating.map((value) => {
                  sum_rating += value.rating_point;
                });
                runInAction(() => {
                  meta.avg_rating = parseFloat(
                    sum_rating / meta.book.rating.length
                  );
                });
              }

              if (meta.book.book_is_released) {
                runInAction(() => {
                  meta.statusPublish = true;
                });
              }
            }
          });
        }

        runInAction(() => {
          meta.admin = window.user.admin;
        });
      }
    }}
  />
  {window.user.roleAdmin === "admin" && (
    <div class={`w-full flex self-stretch items-start justify-start bg-white`}>
      <div class={`w-full flex flex-1 self-stretch items-start justify-start`}>
        <div
          class={`flex self-stretch flex-col space-y-10 items-center justify-start pt-4 pb-9 bg-gray-900 fixed h-full overflow-y-auto`}
          style={"background-color: black"}
        >
          <div
            class={`flex self-stretch items-center justify-center px-9`}
            style={"margin-top:35px;"}
          >
            <img
              class={`flex space-x-2.5 items-start justify-start`}
              src="/uploads/logo/pyri.svg"
            />
          </div>
          <div
            class={`text-white flex flex-1 flex-col space-y-1 items-start justify-start px-2.5`}
            style={"margin-top:50px;"}
          >
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-start py-3 pl-9 pr-3 rounded-2xl`}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
              onClick={() => {
                if (meta.showDashboard == false) {
                  meta.action.changeDashboard(true);
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(false);
                } else {
                  meta.action.changeDashboard(false);
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(false);
                }
              }}
            >
              <img
                src="/fimgs/4911_14105.x1.svg"
                style="width: 16px; min-width: 16px; max-width: 16px; height: 16px; min-height: 16px; max-height: 16px;"
              />
              <div class="flex flex-1 items-center justify-start">
                <div class="text-base font-bold leading-normal text-gray-50">
                  Dashboard
                </div>
              </div>
              <img
                src="/fimgs/4911_14109.x1.svg"
                class={`transform rotate-180`}
                id="chevron-dashboard"
                style={`width: 18.87px; min-width: 18.87px; max-width: 18.87px; height: 18.43px; min-height: 18.43px; max-height: 18.43px; margin-right:25px !important;`}
              />
            </div>
            {meta.showDashboard && (
              <div
                class={`flex self-stretch flex-col space-y-1 items-start justify-start`}
              >
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-dashboard-user");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-white">
                      User
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-dashboard-content");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Konten
                    </div>
                  </div>
                </div>
              </div>
            )}
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-center py-3 pl-9 pr-3 rounded-2xl`}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
              onClick={() => {
                if (meta.showMasterData == false) {
                  meta.action.changeDashboard(false);
                  meta.action.changeMasterData(true);
                  meta.action.changeManagement(false);
                } else {
                  meta.action.changeDashboard(false);
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(false);
                }
              }}
            >
              <img
                src="/fimgs/4911_14121.x1.svg"
                style="width: 14.70px; min-width: 14.70px; max-width: 14.70px; height: 16px; min-height: 16px; max-height: 16px;"
              />
              <div class="flex flex-1 items-center justify-center">
                <div class="flex flex-1 items-start justify-start">
                  <div class="text-base font-bold leading-normal text-gray-50">
                    Master Data
                  </div>
                </div>
              </div>
              <img
                src="/fimgs/4911_14126.x1.svg"
                class={`transform rotate-180`}
                id="chevron-master"
                style={`width: 18.87px; min-width: 18.87px; max-width: 18.87px; height: 18.43px; min-height: 18.43px; max-height: 18.43px; margin-right:25px !important;`}
              />
            </div>
            {meta.showMasterData && (
              <div
                class={`flex self-stretch flex-col space-y-1 items-start justify-start`}
              >
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-kategori");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Kategori Buku
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-genre");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Genre Buku
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-author");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-white">
                      Author{" "}
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-publisher");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Publisher
                    </div>
                  </div>
                </div>
              </div>
            )}
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
              onClick={() => {
                if (meta.showManagement == false) {
                  meta.action.changeDashboard(false);
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(true);
                } else {
                  meta.action.changeDashboard(false);
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(false);
                }
              }}
            >
              <img
                src="/fimgs/4911_14146.x1.svg"
                class="flex items-start justify-start"
                style="width: 15.75px; min-width: 15.75px; max-width: 15.75px; height: 18px; min-height: 18px; max-height: 18px;"
              />
              <div class="text-base font-bold leading-normal text-gray-50">
                User Management
              </div>
              <img
                src="/fimgs/4911_14151.x1.svg"
                id="chevron-management"
                class={`transform rotate-180`}
                style={`width: 18.87px; min-width: 18.87px; max-width: 18.87px; height: 18.43px; min-height: 18.43px; max-height: 18.43px;`}
              />
            </div>
            {meta.showManagement && (
              <div
                class={`flex self-stretch flex-col space-y-1 items-start justify-start`}
              >
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-user");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Data User
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-user-blocked");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Blocked User
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-users-subscription");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Subcription
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-users-subscription-payment");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Subcription Payment
                    </div>
                  </div>
                </div>
              </div>
            )}
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
              onClick={() => {
                navigate("/w-book");
              }}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
            >
              <img
                src="/fimgs/4911_14171.x1.svg"
                style="width: 14.40px; min-width: 14.40px; max-width: 14.40px; height: 16px; min-height: 16px; max-height: 16px;"
              />
              <div class="flex flex-1 items-start justify-start">
                <div class="text-base font-bold leading-normal text-gray-50">
                  Buku
                </div>
              </div>
            </div>
            <div />
          </div>
          <div class="flex self-stretch items-center justify-center">
            <div class="text-base leading-normal text-center text-gray-500">
              Copyright Â© 2021 Pyri
            </div>
          </div>
        </div>
        <div
          class={`w-full flex flex-1 self-stretch flex-col space-y-9 items-start justify-start relative overflow-y-auto bg-gray-100`}
          style={"margin-left:254px;"}
        >
          <div class="flex self-stretch flex-col items-start justify-center px-9 py-4 bg-white">
            <div class="flex self-stretch space-x-2.5 items-center justify-start">
              <div class="flex flex-1 items-start justify-start">
                <div class="text-3xl font-bold leading-10">
                  Dashboard Konten
                </div>
              </div>
              <div class="flex flex-col items-end justify-end">
                <div class="flex items-center justify-end px-4">
                  <div
                    class={`flex space-x-2.5 items-center justify-center`}
                    style={"cursor:pointer;"}
                    onClick={() => {
                      if (meta.showProfile == false) {
                        meta.action.changeProfile(true);
                      } else {
                        meta.action.changeProfile(false);
                      }
                    }}
                  >
                    <div
                      class={`flex items-start justify-start p-2.5`}
                      style="width: 60px; min-width: 60px; max-width: 60px; height: 60px; min-height: 60px; max-height: 60px;"
                    >
                      <img
                        src={
                          meta.admin.user_picture
                            ? "/upload/" + meta.admin.user_picture
                            : "/fimgs/4458_103716.x1.png"
                        }
                        onError={(e) => {
                          e.target.onerror = null;
                          e.target.src = "/fimgs/4458_103716.x1.png";
                        }}
                        style="width: 40px; min-width: 40px; max-width: 40px; height: 40px; min-height: 40px; max-height: 40px;background-image: url('/fimgs/bg-8fb2c341eee5b05b3a5c9f2f0c33ea6665ec17fb');background-size:100% 100%;background-repeat:no-repeat; "
                        class={`rounded-full`}
                      />
                    </div>
                    <div class="flex items-start justify-start">
                      <div
                        class={`text-base font-medium leading-normal text-gray-700`}
                      >
                        {meta.admin.user_name ||
                          meta.admin.user_username ||
                          "Admin"}
                      </div>
                    </div>
                    <img src="/fimgs/4385_20950.x1.svg" />
                  </div>
                </div>
                {meta.showProfile && (
                  <div
                    class={`flex flex-col items-center justify-end px-4 absolute`}
                    style={"top:98px; z-index:1;"}
                  >
                    <div
                      class={`flex self-stretch flex-col space-y-1 items-center justify-start p-4 bg-white shadow rounded`}
                    >
                      <div
                        class={`flex self-stretch items-center justify-center cursor-pointer`}
                        onClick={() => {
                          navigate("/w-profile-admin");
                        }}
                      >
                        <div class="text-base font-medium leading-normal text-gray-900">
                          Edit Profile
                        </div>
                      </div>
                      <div
                        class={`flex self-stretch space-x-2.5 items-center justify-center cursor-pointer`}
                        onClick={meta.logout}
                      >
                        <div class="text-base font-medium leading-normal text-gray-900">
                          Logout
                        </div>
                        <img
                          src="/fimgs/I4911_14193_1048_3884.x1.svg"
                          class={`flex items-start justify-start`}
                          style={`width: 18px; min-width: 18px; max-width: 18px; height: 18px; min-height: 18px; max-height: 18px;`}
                        />
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
          <div
            class={`w-full flex self-stretch flex-col items-start justify-start px-6 py-2 relative overflow-y-auto rounded`}
          >
            <div
              class={`flex self-stretch flex-col space-y-6 items-start justify-start p-9 relative overflow-y-auto bg-white rounded-lg`}
              style={"margin-bottom:70px;"}
            >
              <div class="flex self-stretch space-x-2 items-start justify-start">
                <img
                  src="/fimgs/4911_14197.x1.svg"
                  class={`flex items-center justify-start cursor-pointer`}
                  style={`width: 28px; min-width: 28px; max-width: 28px; height: 40px; min-height: 40px; max-height: 40px;`}
                  onClick={() => {
                    navigate("/w-dashboard-content");
                  }}
                />
                <div class="flex flex-1 items-start justify-start">
                  <div class="text-2xl font-bold leading-9 text-gray-500">
                    Detail Buku
                  </div>
                </div>
              </div>
              <div class="flex self-stretch flex-col items-start justify-start bg-white shadow rounded-lg">
                <div
                  class={`flex self-stretch space-x-4 items-center justify-end px-9 py-6 bg-white rounded-tl-lg rounded-tr-lg`}
                >
                  <div class="flex flex-1 flex-col items-start justify-center">
                    <div class="text-xl font-bold leading-loose">
                      Informasi Buku
                    </div>
                  </div>
                  <div class="flex flex-1 space-x-2 items-center justify-end">
                    <div class="flex items-start justify-start">
                      <div class="text-xl font-bold leading-loose text-right text-gray-500">
                        Publish
                      </div>
                    </div>
                    <button
                      class={`flex items-center justify-start p-0.5 bg-gray-300 shadow rounded-full`}
                      id="switch"
                      style={`width: 53px; min-width: 53px; max-width: 53px; height: 28px; min-height: 28px; max-height: 28px;
    transition: background-color .3s; 
    ${
      meta.statusPublish
        ? "background-color: #ffc048;"
        : "background-color: #d2dae2;"
    }`}
                      onClick={() => {
                        if (meta.statusPublish) {
                          var conf = confirm("Unpublish book ?");

                          if (conf) {
                            meta.setPublishBook(false);
                            let btn_swicth1 = document.getElementById("toggle");
                            btn_swicth1.setAttribute(
                              "style",
                              "transition: margin-left .4s; margin-left: 0px;"
                            );
                          }
                        } else {
                          var conf = confirm("Publish book ?");

                          if (conf) {
                            meta.setPublishBook(true);
                            let btn_swicth1 = document.getElementById("toggle");
                            btn_swicth1.setAttribute(
                              "style",
                              "transition: margin-left .4s; margin-left: 25px;"
                            );
                          }
                        }
                      }}
                    >
                      <img
                        src="/fimgs/4911_14210.x1.svg"
                        id="toggle"
                        class={`flex items-start justify-start`}
                        style={`transition: margin-left .1s; 
  ${meta.statusPublish ? "margin-left: 25px;" : "margin-left: 0px;"}`}
                      />
                    </button>
                  </div>
                </div>
                <div class="flex self-stretch space-x-9 items-start justify-start px-9 pt-4 pb-9">
                  <div class="flex flex-col items-center justify-start">
                    <img
                      src={
                        meta.book.book_picture
                          ? "/upload/" + meta.book.book_picture
                          : "/fimgs/5203_75641.x1.png"
                      }
                      class={`shadow`}
                      style={`width: 200.81px; min-width: 200.81px; max-width: 200.81px; height: 300px; min-height: 300px; max-height: 300px;background-image: url('/fimgs/bg-8cf180f8c9bc5fec9363e489cbbba28f18b9b868');background-size:100% 100%;background-repeat:no-repeat;`}
                      onError={(e) => {
                        e.target.onerror = null;
                        e.target.src = "/fimgs/3145_306147.x1.png";
                      }}
                      id="bc"
                    />
                  </div>
                  <div class="flex flex-1 flex-col space-y-4 items-start justify-start">
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch items-start justify-start">
                        <div
                          class={`text-2xl font-bold leading-9 text-gray-900`}
                        >
                          {meta.book.book_title || "Book title"}
                        </div>
                      </div>
                      <div class="flex self-stretch items-start justify-start">
                        <div class={`text-base leading-normal text-gray-500`}>
                          Tahun terbit :{" "}
                          {dateFormat(
                            meta.book.book_year_of_release,
                            "dd MMMM yyyy"
                          ) || "Book title"}
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch space-x-2 items-center justify-start">
                      <div class="flex items-start justify-start px-3 py-0.5 bg-orange-100 rounded">
                        <div
                          class={`text-base font-bold leading-normal text-amber-500`}
                        >
                          {meta.book.category.category_name !== undefined
                            ? meta.book.category.category_name
                            : "-"}
                        </div>
                      </div>
                      <div class="flex items-start justify-start px-3 py-0.5 bg-white border border-gray-500">
                        <div class="text-base font-bold leading-normal text-gray-500">
                          16+
                        </div>
                      </div>
                      <div class="flex space-x-0.5 items-center justify-center p-2.5">
                        <ficon
                          aria-label="FavoriteStarFill"
                          iconName="FavoriteStarFill"
                          class={`flex items-start justify-start`}
                          style="color: orange;"
                        />
                        <div class="flex items-center justify-start">
                          <div class={`text-base font-bold leading-normal`}>
                            {meta.avg_rating.toFixed(2) || "-"}
                          </div>
                        </div>
                      </div>
                      <div class="flex space-x-0.5 items-center justify-center p-2.5">
                        <div class="flex items-center justify-center">
                          <ficon
                            aria-label="SingleBookmarkSolid"
                            iconName="SingleBookmarkSolid"
                            style="color: orange;"
                          />
                        </div>
                        <div class="flex items-center justify-start">
                          <div class={`text-base font-bold leading-normal`}>
                            {meta.book.bookmarks.length || 0}
                          </div>
                        </div>
                      </div>
                      <div class="flex space-x-0.5 items-center justify-center p-2.5">
                        <img
                          src="/fimgs/4938_14359.x1.svg"
                          class="flex items-start justify-start"
                          style="width: 16px; min-width: 16px; max-width: 16px; height: 16px; min-height: 16px; max-height: 16px;"
                        />
                        <div class="flex items-center justify-start">
                          <div class={`text-base font-bold leading-normal`}>
                            {meta.book.viewBook.length}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div
                          class="flex items-start justify-start"
                          style="width: 80px; min-width: 80px; max-width: 80px;"
                        >
                          <div class="text-base font-bold leading-normal text-gray-700">
                            Genre
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book.tags_books_book_genre_one_idTotags !==
                            null
                              ? meta.book.tags_books_book_genre_one_idTotags
                                  .tag_name
                              : ""}{" "}
                            {meta.book.tags_books_book_genre_two_idTotags !==
                            null
                              ? ", " +
                                meta.book.tags_books_book_genre_two_idTotags
                                  .tag_name
                              : ""}{" "}
                            {meta.book.tags_books_book_genre_three_idTotags !==
                            null
                              ? ", " +
                                meta.book.tags_books_book_genre_three_idTotags
                                  .tag_name
                              : ""}
                          </div>
                        </div>
                      </div>
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div class="flex items-start justify-start">
                          <div
                            class="text-base font-bold leading-normal text-gray-700"
                            style="width: 80px; min-width: 80px; max-width: 80px;"
                          >
                            Author
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book
                              .authors_authorsTobooks_book_author_one_id !==
                            null
                              ? meta.book
                                  .authors_authorsTobooks_book_author_one_id
                                  .author_name
                              : ""}{" "}
                            {meta.book
                              .authors_authorsTobooks_book_author_two_id !==
                            null
                              ? ", " +
                                meta.book
                                  .authors_authorsTobooks_book_author_two_id
                                  .author_name
                              : ""}{" "}
                            {meta.book
                              .authors_authorsTobooks_book_author_three_id !==
                            null
                              ? ", " +
                                meta.book
                                  .authors_authorsTobooks_book_author_three_id
                                  .author_name
                              : ""}
                          </div>
                        </div>
                      </div>
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div
                          class="flex items-start justify-start"
                          style="width: 80px; min-width: 80px; max-width: 80px;"
                        >
                          <div class="text-base font-bold leading-normal text-gray-700">
                            Publisher
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book.publisher.publisher_name || "-"}
                          </div>
                        </div>
                      </div>
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div class="flex items-start justify-start">
                          <div
                            class="text-base font-bold leading-normal text-gray-700"
                            style="width: 80px; min-width: 80px; max-width: 80px;"
                          >
                            ISBN
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book.book_isbn || "-"}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch items-start justify-start">
                        <div class="text-base font-bold leading-normal text-gray-700">
                          Deskripsi :
                        </div>
                      </div>
                      <div class="flex self-stretch items-start justify-start">
                        <div
                          class={`text-base leading-normal text-gray-500`}
                          style={
                            meta.showMoreLess
                              ? `
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 4;
    -webkit-box-orient: vertical;
`
                              : ""
                          }
                        >
                          {meta.book.book_description || "Book title"}
                        </div>
                      </div>
                      <div class="flex flex-col items-start justify-start py-2.5">
                        <button
                          class={`flex items-center justify-start px-2 py-0.5 bg-gray-400 shadow rounded-sm`}
                          style={`padding: 6px 8px; opacity:0.5; transition: 0.5s; :hover{opacity: 1;}`}
                          onClick={() => {
                            runInAction(() => {
                              meta.showMoreLess = meta.showMoreLess
                                ? false
                                : true;
                            });
                          }}
                        >
                          <div class="flex items-start justify-start">
                            <div class={`text-xs leading-none text-white`}>
                              {meta.showMoreLess ? "Show More" : "Show Less"}
                            </div>
                          </div>
                        </button>
                      </div>
                    </div>
                    <div class="flex self-stretch space-x-6 items-start justify-start">
                      <div class="flex flex-col items-center justify-center px-9 py-2 bg-white border rounded border-amber-500 border-opacity-50">
                        <div class="flex flex-col items-start justify-start">
                          <div
                            class={`text-2xl font-bold leading-9 text-gray-700`}
                          >
                            {meta.book.chapter.length || "-"}
                          </div>
                        </div>
                        <div class="flex items-start justify-start">
                          <div class="text-base font-bold leading-normal text-gray-400">
                            Chapter
                          </div>
                        </div>
                      </div>
                      <div class="flex flex-col items-center justify-center px-9 py-2 bg-white border rounded border-amber-500 border-opacity-50">
                        <div class="flex flex-col items-start justify-start">
                          <div
                            class={`text-2xl font-bold leading-9 text-gray-700`}
                          >
                            {meta.book.page.length || "-"}
                          </div>
                        </div>
                        <div class="flex items-start justify-start">
                          <div class="text-base font-bold leading-normal text-gray-400">
                            Halaman
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex self-stretch flex-col items-start justify-start bg-white shadow rounded-lg">
                <div class="flex self-stretch items-center justify-end px-9 py-6 bg-white rounded-tl-lg rounded-tr-lg">
                  <div class="flex flex-1 flex-col items-start justify-center">
                    <div class="text-xl font-bold leading-loose">
                      Komentar Buku
                    </div>
                  </div>
                </div>
                <div class="flex self-stretch space-x-2.5 items-center justify-start px-9">
                  <div class="flex flex-1 self-stretch space-x-4 items-center justify-start">
                    <div class="flex items-start justify-start">
                      <div class="text-base leading-normal">Show</div>
                    </div>
                    <div class="flex space-x-2 items-center justify-start">
                      <select
                        class={`flex flex-col space-y-2.5 items-center justify-start px-6 py-1 bg-white border rounded border-gray-500`}
                        style={`width: 95.87px; min-width: 95.87px; max-width: 95.87px;`}
                        value={meta.entries}
                        onChange={(e) => {
                          meta.onChange(e, "entries");
                        }}
                      >
                        <option class={`hidden`} />
                        <option
                          value="5"
                          class={`flex flex-1 self-stretch flex-col items-start justify-start bg-white`}
                        >
                          5
                        </option>
                        <option
                          value="10"
                          class="flex flex-1 self-stretch flex-col items-start justify-start bg-white"
                        >
                          10
                        </option>
                        <option
                          value="25"
                          class="flex flex-1 self-stretch flex-col items-start justify-start bg-white"
                        >
                          25
                        </option>
                        <option
                          value="50"
                          class="flex flex-1 self-stretch flex-col items-start justify-start bg-white"
                        >
                          50
                        </option>
                      </select>
                      <div class="flex items-start justify-start">
                        <div class="text-base leading-normal">entries</div>
                      </div>
                    </div>
                  </div>
                  <div
                    class={`w-full flex space-x-4 items-center justify-start px-4 py-2 bg-gray-100 rounded-lg`}
                    style="width: 300px; min-width: 300px; max-width: 300px; height: 40px; min-height: 40px; max-height: 40px;"
                  >
                    <img
                      src="/fimgs/I5207_20201_2941_18426.x1.svg"
                      class="flex items-start justify-start"
                      style="width: 24px; min-width: 24px; max-width: 24px; height: 24px; min-height: 24px; max-height: 24px;"
                    />
                    <input
                      class={"w-full"}
                      type="text"
                      placeholder="Search"
                      style={`color: black;
      background:transparent; 
      outline: none;`}
                      onChange={(e) => {
                        meta.onChange(e, "searching");
                      }}
                    />
                  </div>
                </div>
                <div class="flex self-stretch flex-col space-y-4 items-start justify-start px-9 py-6">
                  <div class="flex self-stretch flex-col items-start justify-start p-2.5 bg-white shadow rounded-lg">
                    {meta.comment
                      .slice(meta.first_entries, meta.last_entries)
                      .map((value, index) => {
                        return (
                          <div
                            class={`flex self-stretch space-x-2.5 items-start justify-start`}
                            style={`margin-bottom: 12px; 
      transform: translateX(0px);
      transition: transform 1.5s ease-in-out;`}
                            id={"comment-" + value.comment_id}
                          >
                            <div class="flex self-stretch items-start justify-start pl-0.5 pt-0.5">
                              <img
                                src={
                                  value.users.user_picture
                                    ? "/upload/" + value.users.user_picture
                                    : "/fimgs/4938_14409.x1.png"
                                }
                                onError={(e) => {
                                  e.target.onerror = null;
                                  e.target.src = "/fimgs/4938_14409.x1.png";
                                }}
                                style={`width: 40px; min-width: 40px; max-width: 40px; height: 40px; min-height: 40px; max-height: 40px;background-image: url('/fimgs/bg-903b674a5016cc8f074bb3bb469e48104d576af3');background-size:100% 100%;background-repeat:no-repeat; border-radius: 50%;`}
                              />
                            </div>
                            <div class="flex flex-1 flex-col items-start justify-center">
                              <div class="flex self-stretch space-x-2 items-center justify-start">
                                <div class="flex items-start justify-start">
                                  <div
                                    class={`text-base font-bold leading-normal`}
                                  >
                                    {value.users.user_name || "Username"}
                                  </div>
                                </div>
                                <div class="flex flex-1 items-start justify-start">
                                  <div
                                    class={`text-xs leading-none text-gray-500`}
                                  >
                                    {dateFormat(
                                      value.comment_date_updated,
                                      "dd MMMM yyyy"
                                    ) || "date"}
                                  </div>
                                </div>
                              </div>
                              <div class="flex self-stretch items-start justify-start">
                                <div
                                  class={`text-base leading-normal text-gray-800`}
                                >
                                  {value.comment_description || "Username"}
                                </div>
                              </div>
                            </div>
                            <div class="flex flex-col items-end justify-start">
                              <div
                                class={`flex flex-col items-start justify-start cursor-pointer`}
                                onClick={() => {
                                  if (meta.showAction !== value.comment_id) {
                                    meta.action.changeAction(value.comment_id);
                                  } else {
                                    meta.action.changeAction(0);
                                  }
                                }}
                              >
                                <img src="/fimgs/4938_14497.x1.svg" />
                              </div>
                              {meta.showAction === value.comment_id && (
                                <div
                                  class={`flex flex-col items-center justify-start p-0.5 bg-white shadow rounded`}
                                  style={`margin-top: 30px;
    position: absolute;`}
                                >
                                  <div
                                    class={`flex items-center justify-center px-6 py-1 bg-white rounded-lg cursor-pointer`}
                                    style={
                                      ":hover {color:#ffc048;background-color: rgba(255, 192, 72, 0.2); } "
                                    }
                                    onClick={() => {
                                      var conf = confirm("Confirm delete ?");

                                      if (conf) {
                                        meta.deleteComment(value.comment_id);
                                      }
                                    }}
                                  >
                                    <div
                                      class={`text-base font-medium leading-normal text-center text-gray-500`}
                                      style={":hover {color:#ffc048;}"}
                                    >
                                      Hapus
                                    </div>
                                  </div>
                                </div>
                              )}
                            </div>
                          </div>
                        );
                      })}
                  </div>
                  <div class="flex self-stretch space-x-2.5 items-center justify-start bg-white">
                    <div class="flex flex-1 space-x-2.5 items-start justify-start">
                      {
                        <div
                          class={`text-base leading-normal text-orange-900`}
                        >{`Showing ${meta.first_entries + 1} to 
${
  meta.last_entries <= meta.comment.length
    ? meta.last_entries
    : meta.comment.length
} of ${meta.comment.length} entries`}</div>
                      }
                      {false && meta.filter.role !== "ROLE" && (
                        <div class={`text-base leading-normal`}>{`Showing ${
                          meta.first_entries + 1
                        } to 
${
  meta.last_entries <= meta.filter.dataRole.length
    ? meta.last_entries
    : meta.filter.dataRole.length
} of ${meta.filter.dataRole.length} entries`}</div>
                      )}
                    </div>
                    <div class="flex space-x-2 items-start justify-start">
                      <div
                        class={`flex self-stretch flex-col items-center justify-center px-2 bg-white rounded cursor-pointer`}
                        style={`:hover {outline: 2px solid #ababab;`}
                        onClick={() => {
                          meta.onClickPages(
                            "page" + (meta.pages - 1),
                            meta.pages - 1
                          );
                        }}
                      >
                        <img src="/fimgs/4385_22030.x1.svg" />
                      </div>
                      {meta.pages_array.map((numList, i) => {
                        const upper =
                          meta.pages + 2 < meta.pages_array.length
                            ? meta.pages + 2
                            : meta.pages_array.length;
                        const under = meta.pages - 2 > 0 ? meta.pages - 2 : 1;

                        if (
                          (numList + 1 < upper && numList + 1 > under) ||
                          numList + 1 === 1 ||
                          numList + 1 === meta.pages_array.length
                        ) {
                          return (
                            <div class={`flex items-start justify-start`}>
                              {
                                <div
                                  class={`flex flex-col items-start justify-start px-2.5 py-1 bg-white rounded`}
                                  style={`${
                                    "page" + meta.pages === "page" + (i + 1)
                                      ? `background: #FF8F00;`
                                      : `:hover {background-color: #ffc780;}`
                                  }
  cursor:pointer;`}
                                  onClick={() => {
                                    meta.onClickPages("page" + (i + 1), i + 1);
                                  }}
                                >
                                  <div class={`text-base leading-normal`}>
                                    {numList + 1}
                                  </div>
                                </div>
                              }
                            </div>
                          );
                        } else {
                          if (numList + 1 === upper || numList + 1 === under)
                            return "...";
                        }
                      })}
                      <div
                        class={`flex self-stretch flex-col items-center justify-center px-2 bg-white rounded cursor-pointer`}
                        style={`:hover {outline: 2px solid #ababab;`}
                        onClick={() => {
                          meta.onClickPages(
                            "page" + (meta.pages + 1),
                            meta.pages + 1
                          );
                        }}
                      >
                        <img src="/fimgs/4385_22037.x1.svg" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )}
</>