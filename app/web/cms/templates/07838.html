<>
  <effect
    meta={{
      showAction: false,
      showProfile: false,
      showMasterData: false,
      showManagement: false,
      setPublish: false,
      changeAction: (open) => {},
      changeProfile: (open) => {},
      changeManagement: (open) => {},
      changeMasterData: (open) => {},
      changePublish: (open) => {},
      chapter: [],
      books: [],
      book_title: "",
      book_year_of_release: "",
      book_picture: "",
      book_category: "",
      book_age_restriction: "",
      book_genre_one: "",
      book_genre_two: "",
      book_genre_three: "",
      book_author_one: "",
      book_author_two: "",
      book_author_three: "",
      book_publisher: "",
      book_isbn: "",
      book_description: "",
      book_notes: "",
      chapter_count: "",
      page_count: "",
      book_is_released: false,
      searching: "",
      entries: 5,
      last_entries: 5,
      first_entries: 0,
      pages: 1,
      sum_pages: 0,
      pages_array: [],
      loading_page: true,

      async onChange(key, e) {
        this.loading_page = true;
        let value = e.target.value;

        if (key === "entries") {
          runInAction(() => {
            this[key] = value;
            this.first_entries = 0;
            this.pages = 1;
            this.last_entries =
              this.chapter.length < parseInt(this.entries)
                ? this.chapter.length
                : parseInt(this.entries);
            this.sum_pages = Math.ceil(this.chapter.length / this.entries);
            this.pages_array = Array.apply(null, {
              length: this.sum_pages,
            }).map(Number.call, Number);
            var remove = document.getElementById("cc");
            remove.innerHTML = "";
            var chapter = this.chapter;
            document.getElementById("cc").className =
              "flex self-stretch flex-col items-start justify-start";

            for (let ind = this.first_entries; ind < this.last_entries; ind++) {
              var odd = (ind + 1) % 2;
              let a = document.createElement("div");
              a.className =
                "flex self-stretch space-x-6 items-center justify-start px-4 py-2 bg-white rounded css-3d9z0n " +
                (odd === 0 ? "bg-orange-100" : "");
              let bi = document.createElement("img");
              bi.className = "flex items-start justify-start css-5nv48v";
              bi.setAttribute("src", "/fimgs/3135_52607.x1.svg");
              let c = document.createElement("div");
              c.className = "flex flex-1 items-start justify-start";
              c.style = "cursor: pointer; ";
              let d = document.createElement("div");
              d.className = "text-base font-medium leading-normal";
              d.innerText = chapter[ind].chapter_name;

              c.onclick = () => {
                navigate(
                  `/w-books/${params.book_id}/detail/${chapter[ind].chapter_id}/page`
                );
              };

              let e = document.createElement("div");
              e.className =
                "flex space-x-4 items-center justify-center css-2fhuhl";
              let f = document.createElement("div");
              f.className =
                "flex self-stretch items-center justify-center rounded";
              let gi = document.createElement("img");
              gi.className = "css-5nv48v cursor-pointer";
              gi.setAttribute("src", "/fimgs/3135_52614.x1.svg");

              gi.onclick = () => {
                navigate(
                  `/w-books/${params.book_id}/chapter/edit/${chapter[ind].chapter_id}`
                );
              };

              let hi = document.createElement("img");
              hi.className =
                "flex self-stretch items-center justify-center rounded css-vke9og cursor-pointer";
              hi.setAttribute("src", "/fimgs/3135_52615.x1.svg");

              hi.onclick = () => {
                meta.deleteChapter(chapter[ind].chapter_id);
              };

              f.appendChild(gi);
              e.appendChild(f);
              e.appendChild(hi);
              c.appendChild(d);
              a.appendChild(bi);
              a.appendChild(c);
              a.appendChild(e);
              document.getElementById("cc").appendChild(a);
            }

            this.loading_page = false;
          });
        } else if (key === "searching") {
          runInAction(() => {
            this[key] = value;
            api("/api/chapter", {
              chapter: {
                chapter_name: value,
                chapter_book_id: parseInt(params.book_id),
              },
              e: "Searching",
            }).then((res) => {
              // console.log(res.page);
              runInAction(() => {
                this.chapter = res.chapter;
                this.first_entries = 0;
                this.pages = 1;
                this.last_entries =
                  this.chapter.length < parseInt(this.entries)
                    ? this.chapter.length
                    : parseInt(this.entries);
                this.sum_pages = Math.ceil(this.chapter.length / this.entries); // meta.page_array = new Array(meta.sum_page);

                this.pages_array = Array.apply(null, {
                  length: this.sum_pages,
                }).map(Number.call, Number);
                var remove = document.getElementById("cc");
                remove.innerHTML = "";
                var chapter = this.chapter;
                document.getElementById("cc").className =
                  "flex self-stretch flex-col items-start justify-start";

                for (
                  let ind = this.first_entries;
                  ind < this.last_entries;
                  ind++
                ) {
                  var odd = (ind + 1) % 2;
                  let a = document.createElement("div");
                  a.className =
                    "flex self-stretch space-x-6 items-center justify-start px-4 py-2 bg-white rounded css-3d9z0n " +
                    (odd === 0 ? "bg-orange-100" : "");
                  let bi = document.createElement("img");
                  bi.className = "flex items-start justify-start css-5nv48v";
                  bi.setAttribute("src", "/fimgs/3135_52607.x1.svg");
                  let c = document.createElement("div");
                  c.className = "flex flex-1 items-start justify-start";
                  c.style = "cursor: pointer; ";
                  let d = document.createElement("div");
                  d.className = "text-base font-medium leading-normal";
                  d.innerText = chapter[ind].chapter_name;

                  c.onclick = () => {
                    navigate(
                      `/w-books/${params.book_id}/detail/${chapter[ind].chapter_id}/page`
                    );
                  };

                  let e = document.createElement("div");
                  e.className =
                    "flex space-x-4 items-center justify-center css-2fhuhl";
                  let f = document.createElement("div");
                  f.className =
                    "flex self-stretch items-center justify-center rounded";
                  let gi = document.createElement("img");
                  gi.className = "css-5nv48v cursor-pointer";
                  gi.setAttribute("src", "/fimgs/3135_52614.x1.svg");

                  gi.onclick = () => {
                    navigate(
                      `/w-books/${params.book_id}/chapter/edit/${chapter[ind].chapter_id}`
                    );
                  };

                  let hi = document.createElement("img");
                  hi.className =
                    "flex self-stretch items-center justify-center rounded css-vke9og cursor-pointer";
                  hi.setAttribute("src", "/fimgs/3135_52615.x1.svg");

                  hi.onclick = () => {
                    meta.deleteChapter(chapter[ind].chapter_id);
                  };

                  f.appendChild(gi);
                  e.appendChild(f);
                  e.appendChild(hi);
                  c.appendChild(d);
                  a.appendChild(bi);
                  a.appendChild(c);
                  a.appendChild(e);
                  document.getElementById("cc").appendChild(a);
                }

                this.loading_page = false;
              });
            });
          });
        }

        console.log(key + " : " + this[key]); // console.log("page : " + this.page);
        // console.log("last_entries : " + this.last_entries);
      },

      async onClickPages(key, value) {
        if (value !== this.pages && value !== 0 && value <= this.sum_pages) {
          const last_pages = this.pages;
          const gap = value - last_pages;
          const res = gap > 0;
          var chapter = this.chapter;
          runInAction(() => {
            this.pages = value;

            if (res) {
              this.first_entries += parseInt(this.entries) * Math.abs(gap);
              this.last_entries += parseInt(this.entries) * Math.abs(gap);
            } else {
              this.first_entries -= parseInt(this.entries) * Math.abs(gap);
              this.last_entries -= parseInt(this.entries) * Math.abs(gap);
            }

            var remove = document.getElementById("cc");
            remove.innerHTML = "";
            document.getElementById("cc").className =
              "flex self-stretch flex-col items-start justify-start";

            for (let ind = this.first_entries; ind < this.last_entries; ind++) {
              var odd = (ind + 1) % 2;
              let a = document.createElement("div");
              a.className =
                "flex self-stretch space-x-6 items-center justify-start px-4 py-2 bg-white rounded css-3d9z0n " +
                (odd === 0 ? "bg-orange-100" : "");
              let bi = document.createElement("img");
              bi.className = "flex items-start justify-start css-5nv48v";
              bi.setAttribute("src", "/fimgs/3135_52607.x1.svg");
              let c = document.createElement("div");
              c.className = "flex flex-1 items-start justify-start";
              c.style = "cursor: pointer; ";
              let d = document.createElement("div");
              d.className = "text-base font-medium leading-normal";
              d.innerText = chapter[ind].chapter_name;

              c.onclick = () => {
                navigate(
                  `/w-books/${params.book_id}/detail/${chapter[ind].chapter_id}/page`
                );
              };

              let e = document.createElement("div");
              e.className =
                "flex space-x-4 items-center justify-center css-2fhuhl";
              let f = document.createElement("div");
              f.className =
                "flex self-stretch items-center justify-center rounded";
              let gi = document.createElement("img");
              gi.className = "css-5nv48v cursor-pointer";
              gi.setAttribute("src", "/fimgs/3135_52614.x1.svg");

              gi.onclick = () => {
                navigate(
                  `/w-books/${params.book_id}/chapter/edit/${chapter[ind].chapter_id}`
                );
              };

              let hi = document.createElement("img");
              hi.className =
                "flex self-stretch items-center justify-center rounded css-vke9og cursor-pointer";
              hi.setAttribute("src", "/fimgs/3135_52615.x1.svg");

              hi.onclick = () => {
                meta.deleteChapter(chapter[ind].chapter_id);
              };

              f.appendChild(gi);
              e.appendChild(f);
              e.appendChild(hi);
              c.appendChild(d);
              a.appendChild(bi);
              a.appendChild(c);
              a.appendChild(e);
              document.getElementById("cc").appendChild(a);
            }
          });
          console.log(key + " : " + value); // console.log("first_entries : " + this.first_entries);
          // console.log("last_entries : " + this.last_entries);
          // console.log("gap : " + res);
        }
      },

      async deleteBook(id) {
        console.log(id);
        const confirmDel = confirm("Confirm delete? ");

        if (confirmDel) {
          await api("/api/books", {
            book: {
              book_id: parseInt(id),
            },
            e: "Delete",
          }).then((res) => {
            if (res.res === "Failure") {
              alert("Can't delete book, related to other tables");
            } else {
              navigate("/w-book");
            }
          });
        }
      },

      async deleteChapter(id) {
        console.log(id);
        const confirmDel = confirm("Confirm delete?");

        if (confirmDel) {
          await api("/api/chapter", {
            chapter: {
              chapter_id: parseInt(id),
            },
            e: "Delete",
          }).then((res) => {
            if (res.res === "Failure") {
              alert("Can't delete chapter, related to other tables");
            } else {
              navigate(`/w-books/${params.book_id}/details`);
            }
          });
        }
      },

      async setPublishTrue(id) {
        if (true) {
          await api("/api/books", {
            book: {
              book_id: parseInt(id),
              book_is_released: true,
            },
            e: "Update",
          }).then((res) => {
            if (res.res === "Failure") {
              alert("Can't update book, related to other tables");
            }
          });
        }
      },

      async setPublishFalse(id) {
        if (true) {
          await api("/api/books", {
            book: {
              book_id: parseInt(id),
              book_is_released: false,
            },
            e: "Update",
          }).then((res) => {
            if (res.res === "Failure") {
              alert("Can't update book, related to other tables");
            }
          });
        }
      },

      async logout() {
        confirm("Logout of admin?") &&
          (await api("/api/admin", {
            data: "",
            event: "Logout",
          }).then((res) => {
            navigate("/login-admin");
          }));
      },
    }}
    run={async () => {
      meta.action = {
        changeMasterData: (open) => {
          meta.showMasterData = open;
          let img = document.getElementById("chevron-master");

          if (open == true) {
            img.setAttribute("style", "transform: rotate(0deg);");
          } else {
            img.setAttribute("style", "transform: rotate(180deg);");
          }
        },
        changeManagement: (open) => {
          meta.showManagement = open;
          let img = document.getElementById("chevron-management");

          if (open == true) {
            img.setAttribute("style", "transform: rotate(0deg);");
          } else {
            img.setAttribute("style", "transform: rotate(180deg);");
          }
        },
        changeProfile: (open) => {
          meta.showProfile = open;
        },
        changeAction: (open) => {
          meta.showAction = open;
        },
        changePublish: (open) => {
          meta.setPublish = open;
          let btn_swicth1 = document.getElementById("toggle");
          let btn_swicth2 = document.getElementById("switch");

          if (open == true) {
            btn_swicth1.setAttribute(
              "style",
              "transition: .4s; margin-left: 0px;"
            );
            btn_swicth2.setAttribute(
              "style",
              "transition: .3s; background-color: #d2dae2"
            );
          } else {
            btn_swicth1.setAttribute(
              "style",
              "transition: .4s; margin-left: 25px;"
            );
            btn_swicth2.setAttribute(
              "style",
              "transition: .3s; background-color: #ffc048;"
            );
          }
        },
      }; // read book

      let buku = "";

      if (params.book_id) {
        await api("/api/books", {
          book: {
            book_id: parseInt(params.book_id),
          },
          e: "ReadDetailById",
        }).then((res) => {
          if (res.res !== "Failure" || res === null) {
            buku = res.book;
          }
        }); // read chapter

        let chapter = "";
        await api("/api/chapter", {
          chapter: {
            chapter_book_id: parseInt(params.book_id),
          },
          e: "ReadByBookId",
        }).then((res) => {
          console.log(res);

          if (res.res !== "Failure" || res === null) {
            chapter = res.chapter;
          }
        });
        runInAction(() => {
          meta.books = buku;
          meta.chapter = chapter;
          meta.book_title = buku.book_title;
          meta.book_year_of_release = buku.book_year_of_release;
          meta.book_picture = buku.book_picture;
          meta.book_category = buku.category.category_name;
          meta.book_age_restriction = buku.book_age_restriction;
          meta.book_genre_one =
            buku.tags_books_book_genre_one_idTotags.tag_name;
          meta.book_genre_two = buku.tags_books_book_genre_two_idTotags
            ? buku.tags_books_book_genre_two_idTotags.tag_name
            : null;
          meta.book_genre_three = buku.tags_books_book_genre_three_idTotags
            ? buku.tags_books_book_genre_three_idTotags.tag_name
            : null;
          meta.book_author_one =
            buku.authors_authorsTobooks_book_author_one_id.author_name;
          meta.book_author_two = buku.authors_authorsTobooks_book_author_two_id
            ? buku.authors_authorsTobooks_book_author_two_id.author_name
            : null;
          meta.book_author_three = buku.authors_authorsTobooks_book_author_three_id
            ? buku.authors_authorsTobooks_book_author_three_id.author_name
            : null;
          meta.book_publisher = buku.publisher.publisher_name;
          meta.book_isbn = buku.book_isbn;
          meta.book_description = buku.book_description;
          meta.book_notes = buku.book_notes;
          meta.chapter_count = buku.chapter.length;
          meta.page_count = buku.page.length;
          meta.book_is_released = buku.book_is_released;
          console.log(meta.chapter);
        });
      }

      meta.sum_pages = Math.ceil(meta.chapter.length / meta.entries); // meta.page_array = new Array(meta.sum_page);

      meta.pages_array = Array.apply(null, {
        length: meta.sum_pages,
      }).map(Number.call, Number);
      meta.last_entries =
        meta.chapter.length < meta.entries ? meta.chapter.length : meta.entries;
      meta.loading_page = false;
      document.getElementById("cc").className =
        "flex self-stretch flex-col items-start justify-start";

      for (let ind = meta.first_entries; ind < meta.last_entries; ind++) {
        var odd = (ind + 1) % 2;
        let a = document.createElement("div");
        a.className =
          "flex self-stretch space-x-6 items-center justify-start px-4 py-2 bg-white rounded css-3d9z0n " +
          (odd === 0 ? "bg-orange-100" : "");
        let bi = document.createElement("img");
        bi.className = "flex items-start justify-start css-5nv48v";
        bi.setAttribute("src", "/fimgs/3135_52607.x1.svg");
        let c = document.createElement("div");
        c.className = "flex flex-1 items-start justify-start";
        c.style = "cursor: pointer;";
        let d = document.createElement("div");
        d.className = "text-base font-medium leading-normal";
        d.innerText = meta.chapter[ind].chapter_name;

        c.onclick = () => {
          navigate(
            `/w-books/${params.book_id}/detail/${meta.chapter[ind].chapter_id}/page`
          );
        };

        let e = document.createElement("div");
        e.className = "flex space-x-4 items-center justify-center css-2fhuhl";
        let f = document.createElement("div");
        f.className = "flex self-stretch items-center justify-center rounded";
        let gi = document.createElement("img");
        gi.className = "css-5nv48v cursor-pointer";
        gi.setAttribute("src", "/fimgs/3135_52614.x1.svg");

        gi.onclick = () => {
          navigate(
            `/w-books/${params.book_id}/chapter/edit/${meta.chapter[ind].chapter_id}`
          );
        };

        let hi = document.createElement("img");
        hi.className =
          "flex self-stretch items-center justify-center rounded css-vke9og cursor-pointer";
        hi.setAttribute("src", "/fimgs/3135_52615.x1.svg");

        hi.onclick = () => {
          meta.deleteChapter(meta.chapter[ind].chapter_id);
        };

        f.appendChild(gi);
        e.appendChild(f);
        e.appendChild(hi);
        c.appendChild(d);
        a.appendChild(bi);
        a.appendChild(c);
        a.appendChild(e);
        document.getElementById("cc").appendChild(a);
      }

      let oldbc = document.getElementById("bc");
      let newbc = document.createElement("img");
      newbc.setAttribute("src", "/upload/" + meta.book_picture);
      newbc.setAttribute("width", "200");
      newbc.setAttribute("heigth", "300");

      newbc.onerror = (e) => {
        e.target.onerror = null;
        e.target.src = "/fimgs/3145_306147.x1.png";
      };

      document.getElementById("bc").parentNode.replaceChild(newbc, oldbc);

      if (meta.book_is_released) {
        meta.setPublish = true;
        meta.action.changePublish(false);
      }
    }}
  />
  {window.user.roleAdmin === "admin" && (
    <div class={`w-full flex items-start justify-start bg-white`}>
      <div class={`w-full flex flex-1 items-start justify-start`}>
        <div
          class={`flex self-stretch flex-col space-y-20 items-center justify-start py-9 bg-gray-900 fixed h-full overflow-y-auto`}
          style={"background-color: black"}
        >
          <div
            class={`flex self-stretch space-x-8 items-center justify-start px-9 pt-8`}
            style={"margin-top:35px;"}
          >
            <img
              src="/fimgs/3115_19771.x1.svg"
              style="width: 36px; min-width: 36px; max-width: 36px; height: 36px; min-height: 36px; max-height: 36px;"
            />
            <div
              class={`text-3xl font-bold leading-10 text-white`}
              style={"margin-left:20px;"}
            >
              PYRI
            </div>
          </div>
          <div
            class={`text-white flex flex-1 flex-col space-y-1 items-start justify-start px-2.5`}
            style={"margin-top:50px;"}
          >
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
            >
              <img
                src="/fimgs/3115_19775.x1.svg"
                style="width: 16px; min-width: 16px; max-width: 16px; height: 16px; min-height: 16px; max-height: 16px;"
              />
              <div class="flex flex-1 items-center justify-start">
                <div class="text-base font-bold leading-normal text-gray-50">
                  Dashboard
                </div>
              </div>
            </div>
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-center py-3 pl-9 pr-3 rounded-2xl`}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
              onClick={() => {
                if (meta.showMasterData == false) {
                  meta.action.changeMasterData(true);
                  meta.action.changeManagement(false);
                } else {
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(false);
                }
              }}
            >
              <img
                src="/fimgs/3115_19780.x1.svg"
                style="width: 14.70px; min-width: 14.70px; max-width: 14.70px; height: 16px; min-height: 16px; max-height: 16px;"
              />
              <div class="flex flex-1 items-center justify-center">
                <div class="flex flex-1 items-start justify-start">
                  <div class="text-base font-bold leading-normal text-gray-50">
                    Master Data
                  </div>
                </div>
              </div>
              <img
                src="/fimgs/3115_19785.x1.svg"
                class={`transform rotate-180`}
                id="chevron-master"
                style={`width: 18.87px; min-width: 18.87px; max-width: 18.87px; height: 18.43px; min-height: 18.43px; max-height: 18.43px; margin-right:25px !important;`}
              />
            </div>
            {meta.showMasterData && (
              <div
                class={`flex self-stretch flex-col space-y-1 items-start justify-start`}
              >
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-kategori");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Kategori Buku
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-genre");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Genre Buku
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-author");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-white">
                      Author{" "}
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-publisher");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Publisher
                    </div>
                  </div>
                </div>
              </div>
            )}
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
              onClick={() => {
                if (meta.showManagement == false) {
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(true);
                } else {
                  meta.action.changeMasterData(false);
                  meta.action.changeManagement(false);
                }
              }}
            >
              <img
                src="/fimgs/3115_19805.x1.svg"
                class="flex items-start justify-start"
                style="width: 15.75px; min-width: 15.75px; max-width: 15.75px; height: 18px; min-height: 18px; max-height: 18px;"
              />
              <div class="text-base font-bold leading-normal text-gray-50">
                User Management
              </div>
              <img
                src="/fimgs/3115_19810.x1.svg"
                id="chevron-management"
                class={`transform rotate-180`}
                style={`width: 18.87px; min-width: 18.87px; max-width: 18.87px; height: 18.43px; min-height: 18.43px; max-height: 18.43px;`}
              />
            </div>
            {meta.showManagement && (
              <div
                class={`flex self-stretch flex-col space-y-1 items-start justify-start`}
              >
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-user");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Data User
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                  onClick={() => {
                    navigate("/w-master-user-blocked");
                  }}
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Blocked User
                    </div>
                  </div>
                </div>
                <div
                  class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
                  style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
                >
                  <div />
                  <div class="flex flex-1 items-start justify-start">
                    <div class="text-base font-bold leading-normal text-gray-50">
                      Subcription
                    </div>
                  </div>
                </div>
              </div>
            )}
            <div
              class={`flex self-stretch space-x-2.5 items-center justify-start px-9 py-3 rounded-2xl`}
              onClick={() => {
                navigate("/w-book");
              }}
              style=":hover {background-color: rgba(255, 143, 0, 0.2); color: #FF8F00 !important; cursor:pointer;}"
            >
              <img
                src="/fimgs/3115_19822.x1.svg"
                style="width: 14.40px; min-width: 14.40px; max-width: 14.40px; height: 16px; min-height: 16px; max-height: 16px;"
              />
              <div class="flex flex-1 items-start justify-start">
                <div class="text-base font-bold leading-normal text-gray-50">
                  Buku
                </div>
              </div>
            </div>
            <div />
          </div>
          <div class="flex self-stretch items-center justify-center">
            <div class="text-base leading-normal text-center text-gray-500">
              Copyright Â© 2021 Pyri
            </div>
          </div>
        </div>
        <div
          class={`w-full flex flex-1 self-stretch flex-col space-y-9 items-start justify-start relative overflow-y-auto bg-gray-100`}
          style={"margin-left:254px;"}
        >
          <div class="flex self-stretch flex-col items-start justify-center p-9 bg-white">
            <div class="flex self-stretch space-x-2.5 items-center justify-start">
              <div class="flex flex-1 items-start justify-start">
                <div class="text-3xl font-bold leading-10">Buku</div>
              </div>
              <div class="flex flex-col items-end justify-end">
                <div class="flex items-center justify-end px-4">
                  <div
                    class={`flex space-x-2.5 items-center justify-center cursor-pointer`}
                    onClick={() => {
                      if (meta.showProfile == false) {
                        meta.action.changeProfile(true);
                      } else {
                        meta.action.changeProfile(false);
                      }
                    }}
                  >
                    <img
                      src="/fimgs/2645_18582.x1.png"
                      class="flex items-start justify-start p-2.5"
                      style="width: 60px; min-width: 60px; max-width: 60px; height: 60px; min-height: 60px; max-height: 60px;"
                    />
                    <div class="flex items-start justify-start">
                      <div class="text-base font-medium leading-normal text-gray-700">
                        Savannah Nguyen
                      </div>
                    </div>
                    <img
                      src="/fimgs/2645_18586.x1.svg"
                      style="width: 18.87px; min-width: 18.87px; max-width: 18.87px; height: 18.43px; min-height: 18.43px; max-height: 18.43px;"
                    />
                  </div>
                </div>
                {meta.showProfile && (
                  <div
                    class={`flex flex-col items-center justify-end px-4 absolute`}
                    style={"top: 98px;"}
                  >
                    <div
                      class={`flex self-stretch flex-col space-y-1 items-center justify-start p-4 bg-white shadow rounded`}
                    >
                      <div
                        class={`flex self-stretch items-center justify-center cursor-pointer`}
                      >
                        <div class="text-base font-medium leading-normal text-gray-900">
                          Edit Profile
                        </div>
                      </div>
                      <div
                        class={`flex self-stretch space-x-2.5 items-center justify-center cursor-pointer`}
                        onClick={meta.logout}
                      >
                        <div class="text-base font-medium leading-normal text-gray-900">
                          Logout
                        </div>
                        <img
                          src="/fimgs/I2645_18589_1048_3884.x1.svg"
                          class={`flex items-start justify-start`}
                          style={`width: 18px; min-width: 18px; max-width: 18px; height: 18px; min-height: 18px; max-height: 18px;`}
                        />
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
          <div
            class={`w-full flex self-stretch flex-col items-start justify-start px-6 py-2 relative overflow-y-auto rounded`}
          >
            <div
              class={`flex self-stretch flex-col space-y-6 items-start justify-start p-9 relative overflow-y-auto bg-white rounded-lg`}
              style={"margin-bottom:70px;"}
            >
              <div class="flex self-stretch space-x-2 items-start justify-start">
                <img
                  src="/fimgs/3148_171892.x1.svg"
                  class={`flex items-center justify-start cursor-pointer`}
                  style={`width: 28px; min-width: 28px; max-width: 28px; height: 40px; min-height: 40px; max-height: 40px;`}
                  onClick={() => {
                    navigate("/w-book");
                  }}
                />
                <div class="flex flex-1 items-start justify-start">
                  <div class="text-2xl font-bold leading-9 text-gray-500">
                    Detail Buku
                  </div>
                </div>
                <div class="flex flex-1 flex-col items-end justify-start">
                  <div
                    class={`flex flex-col items-start justify-start cursor-pointer`}
                    onClick={() => {
                      if (meta.showAction == false) {
                        meta.action.changeAction(true);
                      } else {
                        meta.action.changeAction(false);
                      }
                    }}
                  >
                    <img src="/fimgs/3148_171899.x1.svg" />
                  </div>
                  {meta.showAction && (
                    <div
                      class={`flex flex-col space-y-1 items-center justify-start p-4 bg-white shadow rounded absolute`}
                      style={"top: 90px;"}
                    >
                      <div
                        class={`flex self-stretch items-center justify-start px-6 py-1 bg-white rounded-lg cursor-pointer`}
                        style={
                          ":hover {color:#ffc048;background-color: rgba(255, 192, 72, 0.2); } "
                        }
                        onClick={(e) => {
                          navigate(`/w-books/edit/${params.book_id}`);
                        }}
                      >
                        <div
                          class={`text-base font-medium leading-normal text-gray-500`}
                          style={":hover {color:#ffc048;}"}
                        >
                          Edit
                        </div>
                      </div>
                      <div
                        class={`flex self-stretch items-center justify-start px-6 py-1 bg-white rounded-lg cursor-pointer`}
                        style={
                          ":hover {color:#ffc048;background-color: rgba(255, 192, 72, 0.2); } "
                        }
                        onClick={(e) => {
                          meta.deleteBook(params.book_id);
                        }}
                      >
                        <div
                          class={`text-base font-medium leading-normal text-gray-500`}
                          style={":hover {color:#ffc048;}"}
                        >
                          Hapus
                        </div>
                      </div>
                    </div>
                  )}
                </div>
              </div>
              <div class="flex self-stretch flex-col items-start justify-start bg-white shadow rounded-lg">
                <div
                  class={`flex self-stretch space-x-4 items-center justify-end px-9 py-6 bg-white rounded-tl-lg rounded-tr-lg`}
                >
                  <div class="flex flex-1 flex-col items-start justify-center">
                    <div class="text-xl font-bold leading-loose">
                      Informasi Buku
                    </div>
                  </div>
                  <div class="flex flex-1 space-x-2 items-center justify-end">
                    <div class="flex items-start justify-start">
                      <div class="text-xl font-bold leading-loose text-right text-gray-500">
                        Publish
                      </div>
                    </div>
                    <button
                      class={`flex items-center justify-start p-0.5 bg-gray-300 shadow rounded-full`}
                      id="switch"
                      style={`width: 53px; min-width: 53px; max-width: 53px; height: 28px; min-height: 28px; max-height: 28px;`}
                      onClick={() => {
                        if (meta.setPublish == false) {
                          meta.action.changePublish(true);
                          meta.setPublishFalse(params.book_id);
                        } else {
                          meta.action.changePublish(false);
                          meta.setPublishTrue(params.book_id);
                        }
                      }}
                    >
                      <img
                        src="/fimgs/3145_137764.x1.svg"
                        id="toggle"
                        class={`flex items-start justify-start`}
                        style={`width: 24px; min-width: 24px; max-width: 24px; height: 24px; min-height: 24px; max-height: 24px;`}
                      />
                    </button>
                  </div>
                </div>
                <div class="flex self-stretch space-x-9 items-start justify-start px-9 pt-4 pb-9">
                  <div class="flex flex-col items-center justify-start px-6">
                    <img
                      src="/fimgs/3127_33008.x1.png"
                      class={`shadow`}
                      style={`width: 200.81px; min-width: 200.81px; max-width: 200.81px; height: 300px; min-height: 300px; max-height: 300px;background-image: url('/fimgs/bg-8cf180f8c9bc5fec9363e489cbbba28f18b9b868');background-size:100% 100%;background-repeat:no-repeat;`}
                      onError={(e) => {
                        e.target.onerror = null;
                        e.target.src = "/fimgs/3127_33008.x1.png";
                      }}
                      id="bc"
                    />
                  </div>
                  <div class="flex flex-1 flex-col space-y-4 items-start justify-start">
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch items-start justify-start">
                        <div
                          class={`text-2xl font-bold leading-9 text-gray-900`}
                        >
                          {meta.book_title}
                        </div>
                      </div>
                      <div class="flex self-stretch items-start justify-start">
                        <div class={`text-base leading-normal text-gray-500`}>
                          Tanggal Publikasi :{" "}
                          {meta.book_year_of_release
                            ? new Date(
                                meta.book_year_of_release
                              ).toLocaleDateString("en-GB", {
                                day: "numeric",
                                month: "short",
                                year: "numeric",
                              })
                            : "Release date not specified"}
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch space-x-2 items-start justify-start">
                      <div class="flex items-start justify-start px-3 py-0.5 bg-orange-100 rounded">
                        <div
                          class={`text-base font-bold leading-normal text-amber-500`}
                        >
                          {meta.book_category}
                        </div>
                      </div>
                      <div class="flex items-start justify-start px-3 py-0.5 bg-white border border-gray-500">
                        <div
                          class={`text-base font-bold leading-normal text-gray-500`}
                        >
                          {meta.book_age_restriction
                            ? meta.book_age_restriction + "+"
                            : "E"}
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div
                          class="flex items-start justify-start"
                          style="width: 80px; min-width: 80px; max-width: 80px; height: 24px; min-height: 24px; max-height: 24px;"
                        >
                          <div class="text-base font-bold leading-normal text-gray-700">
                            Genre
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book_genre_one ? meta.book_genre_one : ""}{" "}
                            {meta.book_genre_two
                              ? ", " + meta.book_genre_two
                              : ""}{" "}
                            {meta.book_genre_three
                              ? ", " + meta.book_genre_three
                              : ""}
                          </div>
                        </div>
                      </div>
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div
                          class="flex items-start justify-start"
                          style="width: 80px; min-width: 80px; max-width: 80px; height: 24px; min-height: 24px; max-height: 24px;"
                        >
                          <div class="text-base font-bold leading-normal text-gray-700">
                            Author
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book_author_one ? meta.book_author_one : ""}{" "}
                            {meta.book_author_two
                              ? ", " + meta.book_author_two
                              : ""}{" "}
                            {meta.book_author_three
                              ? ", " + meta.book_author_three
                              : ""}
                          </div>
                        </div>
                      </div>
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div
                          class="flex items-start justify-start"
                          style="width: 80px; min-width: 80px; max-width: 80px; height: 24px; min-height: 24px; max-height: 24px;"
                        >
                          <div class="text-base font-bold leading-normal text-gray-700">
                            Publisher
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book_publisher ? meta.book_publisher : "-"}
                          </div>
                        </div>
                      </div>
                      <div class="flex self-stretch space-x-4 items-start justify-start">
                        <div class="flex items-start justify-start">
                          <div
                            class="text-base font-bold leading-normal text-gray-700"
                            style="width: 80px; min-width: 80px; max-width: 80px; height: 24px; min-height: 24px; max-height: 24px;"
                          >
                            ISBN
                          </div>
                        </div>
                        <div class="flex flex-1 items-start justify-start">
                          <div class={`text-base leading-normal text-gray-500`}>
                            {meta.book_isbn ? meta.book_isbn : "-"}
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch items-start justify-start">
                        <div class="text-base font-bold leading-normal text-gray-700">
                          Deskripsi :
                        </div>
                      </div>
                      <div class="flex self-stretch items-start justify-start">
                        <div class={`text-base leading-normal text-gray-500`}>
                          {meta.book_description
                            ? meta.book_description
                            : "No description available yet."}
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch flex-col items-start justify-start">
                      <div class="flex self-stretch items-start justify-start">
                        <div class="text-base font-bold leading-normal text-gray-700">
                          Notes :
                        </div>
                      </div>
                      <div class="flex self-stretch items-start justify-start">
                        <div class={`text-base leading-normal text-gray-500`}>
                          {meta.book_notes
                            ? meta.book_notes
                            : "No notes added."}
                        </div>
                      </div>
                    </div>
                    <div class="flex self-stretch space-x-6 items-start justify-start">
                      <div class="flex flex-col items-center justify-center px-9 py-2 bg-white border rounded border-amber-500 border-opacity-50">
                        <div class="flex flex-col items-start justify-start">
                          <div
                            class={`text-2xl font-bold leading-9 text-gray-700`}
                          >
                            {meta.chapter_count ? meta.chapter_count : 0}
                          </div>
                        </div>
                        <div class="flex items-start justify-start">
                          <div class="text-base font-bold leading-normal text-gray-400">
                            Chapter
                          </div>
                        </div>
                      </div>
                      <div class="flex flex-col items-center justify-center px-9 py-2 bg-white border rounded border-amber-500 border-opacity-50">
                        <div class="flex flex-col items-start justify-start">
                          <div
                            class={`text-2xl font-bold leading-9 text-gray-700`}
                          >
                            {meta.page_count ? meta.page_count : 0}
                          </div>
                        </div>
                        <div class="flex items-start justify-start">
                          <div class="text-base font-bold leading-normal text-gray-400">
                            Halaman
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex self-stretch flex-col items-start justify-start bg-white shadow rounded-lg">
                <div class="flex self-stretch space-x-4 items-center justify-end px-9 py-6 bg-white rounded-tl-lg rounded-tr-lg">
                  <div class="flex flex-1 flex-col items-start justify-center">
                    <div class="text-xl font-bold leading-loose">
                      Konten Buku
                    </div>
                  </div>
                  <button
                    class={`flex space-x-1 items-start justify-start px-4 py-2 bg-amber-500 shadow rounded`}
                    style={`style={'margin-left:6px;'}`}
                    onClick={(e) => {
                      navigate(`/w-books/${params.book_id}/chapter/add`);
                    }}
                  >
                    <img
                      src="/fimgs/2763_18672.x1.svg"
                      class="flex items-start justify-start"
                      style="width: 24px; min-width: 24px; max-width: 24px; height: 24px; min-height: 24px; max-height: 24px;"
                    />
                    <div class="flex self-stretch items-start justify-start">
                      <div
                        class={`text-base font-bold leading-normal text-white`}
                      >
                        {children || "Tambah Chapter"}
                      </div>
                    </div>
                  </button>
                </div>
                <div class="flex self-stretch flex-col space-y-6 items-start justify-start px-9 py-6">
                  <div class="flex self-stretch space-x-2.5 items-center justify-start">
                    <div class="flex flex-1 self-stretch space-x-4 items-center justify-start">
                      <div class="flex items-start justify-start">
                        <div class="text-base leading-normal">Show</div>
                      </div>
                      <div class="flex space-x-2 items-center justify-start">
                        <select
                          class={`flex flex-col space-y-2.5 items-center justify-start px-6 py-1 bg-white border rounded border-gray-500`}
                          style={`width: 95.87px; min-width: 95.87px; max-width: 95.87px;`}
                          value={meta.entries}
                          onChange={(e) => {
                            meta.onChange("entries", e);
                          }}
                        >
                          <option class={`hidden`} />
                          <option
                            value="5"
                            class={`flex flex-1 self-stretch flex-col items-start justify-start bg-white`}
                          >
                            5
                          </option>
                          <option
                            value="10"
                            class="flex flex-1 self-stretch flex-col items-start justify-start bg-white"
                          >
                            10
                          </option>
                          <option
                            value="25"
                            class="flex flex-1 self-stretch flex-col items-start justify-start bg-white"
                          >
                            25
                          </option>
                          <option
                            value="50"
                            class="flex flex-1 self-stretch flex-col items-start justify-start bg-white"
                          >
                            50
                          </option>
                        </select>
                        <div class="flex items-start justify-start">
                          <div class="text-base leading-normal">entries</div>
                        </div>
                      </div>
                    </div>
                    <div
                      class={`w-full flex space-x-4 items-center justify-start px-4 py-2 bg-gray-100 rounded-lg`}
                      style="width: 300px; min-width: 300px; max-width: 300px; height: 40px; min-height: 40px; max-height: 40px;"
                    >
                      <img
                        src="/fimgs/I3818_19568_2941_18426.x1.svg"
                        class="flex items-start justify-start"
                        style="width: 24px; min-width: 24px; max-width: 24px; height: 24px; min-height: 24px; max-height: 24px;"
                      />
                      <input
                        class={"w-full"}
                        type="text"
                        placeholder="Search"
                        style={`color: black;
      background:transparent; 
      outline: none;`}
                        onChange={(e) => {
                          meta.onChange("searching", e);
                        }}
                      />
                    </div>
                  </div>
                  <div class="flex self-stretch flex-col space-y-2.5 items-start justify-start p-2.5">
                    <div id="cc" />
                    {meta.chapter.length === 0 && (
                      <tr
                        class={`w-full flex self-stretch items-center justify-center px-4 py-2 rounded`}
                        style={""}
                      >
                        <div class="text-base leading-normal">
                          Data not found!
                        </div>
                      </tr>
                    )}
                  </div>
                  <div class="flex self-stretch space-x-2.5 items-center justify-start bg-white">
                    <div class="flex flex-1 items-start justify-start">
                      <div
                        class={`text-base leading-normal text-orange-900`}
                      >{`Showing ${meta.first_entries + 1} to ${
                        meta.last_entries <= meta.chapter.length
                          ? meta.last_entries
                          : meta.chapter.length
                      } of ${meta.chapter.length} entries`}</div>
                    </div>
                    <div class="flex space-x-2 items-start justify-start">
                      <div
                        class={`flex self-stretch flex-col items-center justify-center px-2 bg-white rounded cursor-pointer`}
                        style={`:hover {outline: 2px solid #ababab;`}
                        onClick={() => {
                          meta.onClickPages(
                            "page" + (meta.pages - 1),
                            meta.pages - 1
                          );
                        }}
                      >
                        <img
                          src="/fimgs/3818_20074.x1.svg"
                          style={`width: 18px; min-width: 18px; max-width: 18px; height: 14px; min-height: 14px; max-height: 14px;`}
                        />
                      </div>
                      {meta.pages_array.map((numList, i) => {
                        const upper =
                          meta.pages + 2 < meta.pages_array.length
                            ? meta.pages + 2
                            : meta.pages_array.length;
                        const under = meta.pages - 2 > 0 ? meta.pages - 2 : 1;

                        if (
                          (numList + 1 < upper && numList + 1 > under) ||
                          numList + 1 === 1 ||
                          numList + 1 === meta.pages_array.length
                        ) {
                          return (
                            <div class={`flex items-start justify-start`}>
                              {
                                <div
                                  class={`flex flex-col items-start justify-start px-2.5 py-1 bg-white rounded`}
                                  style={`${
                                    "page" + meta.pages === "page" + (i + 1)
                                      ? `background: #FF8F00;`
                                      : `:hover {background-color: #ffc780;}`
                                  }
  cursor:pointer;`}
                                  onClick={() => {
                                    meta.onClickPages("page" + (i + 1), i + 1);
                                  }}
                                >
                                  <div class={`text-base leading-normal`}>
                                    {numList + 1}
                                  </div>
                                </div>
                              }
                            </div>
                          );
                        } else {
                          if (numList + 1 === upper || numList + 1 === under)
                            return "...";
                        }
                      })}
                      <div
                        class={`flex self-stretch flex-col items-center justify-center px-2 bg-white rounded cursor-pointer`}
                        style={`:hover {outline: 2px solid #ababab;`}
                        onClick={() => {
                          meta.onClickPages(
                            "page" + (meta.pages + 1),
                            meta.pages + 1
                          );
                        }}
                      >
                        <img
                          src="/fimgs/3818_20080.x1.svg"
                          style="width: 18px; min-width: 18px; max-width: 18px; height: 14px; min-height: 14px; max-height: 14px;"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )}
</>